<% layout("/layouts/boilerplate") %>

<div class="container mt-3">
  <h2>My Profile</h2>

  <% if (locals.success) { %>
  <div class="alert alert-success"><%= success %></div>
  <% } %> <% if (locals.error) { %>
  <div class="alert alert-danger"><%= error %></div>
  <% } %>

  <!-- Profile Picture Display -->
  <div class="mt-3">
    <label class="form-label">Profile Photo</label><br />
    <img
      src="<%= user.avatar && user.avatar.url ? user.avatar.url : 'https://res.cloudinary.com/dge7zdb1k/image/upload/v1748925711/wonderlust/f8ozf8gecoox7dgcussa.jpg' %>"
      alt="Profile Picture"
      class="img-thumbnail"
      style="max-width: 150px"
    />
  </div>

  <!-- Update Form -->
  <form
    action="/profile"
    method="POST"
    enctype="multipart/form-data"
    class="mt-4"
  >
    <div class="mb-3">
      <label for="username" class="form-label">Username</label>
      <input
        type="text"
        class="form-control custom-input"
        autofocus
        id="username"
        name="username"
        value="<%= user.username %>"
        required
      />
    </div>
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input
        type="email"
        class="form-control custom-input"
        id="email"
        name="email"
        value="<%= user.email %>"
        required
      />
    </div>
    <div class="mb-3">
      <label for="avatar" class="form-label">Change Profile Photo</label>
      <input
        type="file"
        class="form-control custom-input"
        id="avatar"
        name="avatar"
        accept="image/*"
      />
    </div>
    <button
      type="submit"
      class="btn mb-3"
      style="background-color: #fe424d; color: white"
    >
      Update Profile
    </button>
  </form>
</div>
